<html>
<head>
<title>DBS</title>
</head>
<body>
<h1>DBS</h1>
<div id="mochi_white"></div>
<table border="1">
<tr><td /><td /><td /></tr>
<tr><td /><td /><td /></tr>
<tr><td /><td /><td /></tr>
<tr><td /><td /><td /></tr>
</table>
<div id="mochi_black"></div>
<script type="text/javascript" src="jquery-2.0.3.min.js"></script>
<script type="text/javascript" src="dbs.core.js"></script>

<script>
// ---- VIEW ----

// 盤面表示
const BAN_ICON = [
  "　",
  "↑ひ", "↑に", "↑ぞ", "↑き", "↑ら",
  "↓ひ", "↓に", "↓ぞ", "↓き", "↓ら",
]

// 持ち駒表示
const MOCHI_ICON = [
  "ひよこ：", "にわとり：", "ぞう：", "きりん：", "らいおん："
]

// banを画面に反映する
function showBan(){
  var ban = gban.ban
  var mochi = gban.mochi

  for(var x = 0;x < 3;x++){
    for(var y = 0;y < 4;y++){
      var i = x + y * 3
      $("tr").eq(y).find("td").eq(x).text(BAN_ICON[ban[i] + 1])
    }
  }
  var t = ""
  for(var i = 0;i < WHITE;i++){
    if(0 < mochi[i]) t += MOCHI_ICON[i] + mochi[i]
  }
  $("#mochi_black").text(t)

  var t = ""
  for(var i = WHITE;i < WHITE * 2;i++){
    if(0 < mochi[i]) t += MOCHI_ICON[i % WHITE] + mochi[i]
  }
  $("#mochi_white").text(t)

}

// ---- Utility Methods ----

// 手を実行して画面更新
function mv(from, to, reverse){
  gban = gban.execute(new Hand(from, to, reverse))
  showBan()
}

// ---- メイン系 ----

// global object
var gban

$(function(){
  gban = new Banmen()
  showBan()
})
</script>
</body>
</html>